<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Team Purple Interview</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <img src="logo.png" class="logo" alt="Logo" />
    <div class="card">
      <h2 id="greeting">Welcome, Candidate</h2>
      <div id="questionBox">
        <h3 id="question">Loading question...</h3>
        <p id="timer">⏳ 300s</p>
        <button id="nextBtn" onclick="nextQuestion()" disabled>Next Question</button>
      </div>
    </div>
  </div>

  <script>
    const name = sessionStorage.getItem("candidateName") || "Candidate";
    const email = sessionStorage.getItem("candidateEmail") || "";
    document.getElementById("greeting").innerText = "Welcome, " + name;

    const questions = [
      "Explain the difference between HTTP and HTTPS.",
      "What is a closure in JavaScript?",
      "Describe how a REST API works.",
      "How does async/await work in JS?",
      "Explain time complexity with an example.",
      "What is the purpose of Docker?",
      "What is the difference between SQL and NoSQL?",
      "Explain the concept of promises in JS.",
      "What is the use of Git branches?",
      "How would you optimize a website for performance?"
    ];

    let current = 0;
    let timeLeft = 300;
    let timerInterval;

    function speak(text) {
      const synth = window.speechSynthesis;
      const utter = new SpeechSynthesisUtterance(text);
      synth.speak(utter);
    }

    function showQuestion(index) {
      if (index >= questions.length) {
        document.getElementById("question").innerText = "Interview Complete. Thank you!";
        document.getElementById("timer").style.display = "none";
        document.getElementById("nextBtn").style.display = "none";
        return;
      }

      const q = questions[index];
      document.getElementById("question").innerText = q;
      speak(q);
      timeLeft = 300;
      document.getElementById("nextBtn").disabled = true;

      if (timerInterval) clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        document.getElementById("timer").innerText = `⏳ ${timeLeft}s`;
        timeLeft--;
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          document.getElementById("nextBtn").disabled = false;
        }
      }, 1000);
    }

    function nextQuestion() {
      current++;
      showQuestion(current);
    }

    window.onload = () => {
      showQuestion(0);
    };
  </script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <title>Team Purple AI Interviewer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
      background: linear-gradient(to right, #f0f4ff, #e0e7ff);
    }
    h1 {
      color: #4b0082;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 20px;
      cursor: pointer;
    }
    #log {
      margin-top: 20px;
      background: #fff;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .logo {
      max-width: 200px;
      margin-bottom: 20px;
    }
    video {
      margin-top: 20px;
      width: 320px;
      border: 2px solid #4b0082;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <img src="logo.png" alt="Company Logo" class="logo" />
  <h1>ðŸŽ¤ Team Purple AI Interviewer</h1>
  <p>Click below to begin your AI video interview.</p>
  <button onclick="startInterview()">Start Interview</button>
  <div id="log"></div>
  <video id="webcam" autoplay muted></video>

  <script>
    const questions = [
      "Hello, I am Team Purple AI Interviewer. We are sorry for the inconvenience caused by re-interviews due to an emergency. Let's start.",
      "Tell me about yourself.",
      "What are your core technical strengths?",
      "Describe a challenging problem you solved recently.",
      "Where do you see yourself in 5 years?",
      "Thanks! That concludes the interview."
    ];

    let current = 0;
    const log = document.getElementById('log');

    function speak(text) {
      const synth = window.speechSynthesis;
      const utterance = new SpeechSynthesisUtterance(text);
      synth.speak(utterance);
    }

    function askQuestion() {
      if (current < questions.length) {
        const question = questions[current];
        speak(question);
        log.innerHTML += `<p><strong>Q:</strong> ${question}</p>`;
        current++;
        setTimeout(askQuestion, 60000); // wait 60s per answer
      } else {
        stopRecording();
        log.innerHTML += `<p><strong>âœ… Interview complete.</strong></p>`;
      }
    }

    let mediaRecorder;
    let recordedChunks = [];

    async function startInterview() {
      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
      document.getElementById('webcam').srcObject = stream;

      recordedChunks = [];
      mediaRecorder = new MediaRecorder(stream);
      mediaRecorder.ondataavailable = e => {
        if (e.data.size > 0) recordedChunks.push(e.data);
      };
      mediaRecorder.onstop = saveRecording;
      mediaRecorder.start();

      askQuestion();
    }

    function stopRecording() {
      if (mediaRecorder && mediaRecorder.state === 'recording') {
        mediaRecorder.stop();
      }
    }

    function saveRecording() {
      const blob = new Blob(recordedChunks, { type: 'video/webm' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'interview_recording.webm';
      a.click();
    }
  </script>
</body>
</html>

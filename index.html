<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Team Purple AI Interviewer</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap">
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #1a1a2e, #3f0071);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
    }
    header {
      margin-top: 20px;
      text-align: center;
    }
    header img {
      border-radius: 50%;
      width: 120px;
      height: 120px;
    }
    .card {
      background: #2c2c54;
      padding: 2rem;
      margin-top: 20px;
      border-radius: 2xl;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      max-width: 600px;
      width: 90%;
    }
    h1, h2, p {
      text-align: center;
    }
    input, select, button, textarea {
      width: 100%;
      padding: 0.8rem;
      margin: 0.5rem 0;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
    }
    button {
      background-color: gold;
      color: #3f0071;
      font-weight: bold;
      cursor: pointer;
    }
    .hidden {
      display: none;
    }
    .timer {
      font-size: 1.2rem;
      font-weight: bold;
      margin-top: 1rem;
      color: gold;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Team Purple Logo">
    <h1>Team Purple AI Interviewer</h1>
  </header>

  <div class="card" id="form-section">
    <h2>Candidate Details</h2>
    <input type="text" id="name" placeholder="Full Name" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="tel" id="phone" placeholder="Phone Number" required>
    <input type="file" id="resume" accept=".pdf,.doc,.docx">
    <select id="slot">
      <option value="">-- Select Interview Slot --</option>
      <option value="now">Continue Now</option>
      <option value="9AM">9:00 AM</option>
      <option value="11AM">11:00 AM</option>
      <option value="2PM">2:00 PM</option>
    </select>
    <button onclick="showInstructions()">Continue</button>
  </div>

  <div class="card hidden" id="instructions-section">
    <h2>Interview Instructions</h2>
    <p><strong>Device & Environment:</strong> Use a laptop with webcam & mic in a quiet, well-lit room.</p>
    <p><strong>No External Help:</strong> No phones, apps, or others present. Cheating disqualifies.</p>
    <p><strong>AI Monitoring:</strong> Face, voice, and activity are monitored.</p>
    <p><strong>Technical Setup:</strong> Test mic & webcam. Avoid switching tabs.</p>
    <p><strong>Deadline:</strong> Complete the interview within the allotted time.</p>
    <p>Warm regards,<br>Team Purple Recruitment Team</p>
    <button onclick="startCountdown()">I'm Ready</button>
  </div>

  <div class="card hidden" id="countdown-section">
    <h2>Interview starts in...</h2>
    <div id="countdown">3</div>
  </div>

  <div class="card hidden" id="interview-section">
    <h2 id="question">Loading question...</h2>
    <div class="timer" id="timer">05:00</div>
    <video id="preview" autoplay muted></video>
  </div>

  <script>
    const questions = [
      "Hello, I am Team Purple AI Interviewer. We are sorry for the inconvenience caused by taking re-interviews due to an emergency. Let's start the interview.",
      "1. Tell me about yourself.",
      "2. Explain your educational background.",
      "3. What are your weaknesses and strengths?",
      "4. Describe your experience with object-oriented programming.",
      "5. How would you optimize low performing SQL code?",
      "6. Explain the purpose of a firewall.",
      "7. How do you approach troubleshooting a crashing program?",
      "8. Explain SDLC and its uses.",
      "9. Explain the concept of horizontal scaling and its benefits.",
      "10. Why should I hire you?"
    ];

    let currentQuestion = 0;
    let countdown = 3;

    function showInstructions() {
      const name = document.getElementById('name').value;
      if (!name) return alert("Please enter your name.");
      document.getElementById('form-section').classList.add('hidden');
      document.getElementById('instructions-section').classList.remove('hidden');
    }

    function startCountdown() {
      document.getElementById('instructions-section').classList.add('hidden');
      document.getElementById('countdown-section').classList.remove('hidden');
      const countdownEl = document.getElementById('countdown');
      const interval = setInterval(() => {
        countdown--;
        countdownEl.textContent = countdown;
        if (countdown < 1) {
          clearInterval(interval);
          document.getElementById('countdown-section').classList.add('hidden');
          startInterview();
        }
      }, 1000);
    }

    function startInterview() {
      document.getElementById('interview-section').classList.remove('hidden');
      navigator.mediaDevices.getUserMedia({ video: true, audio: true })
        .then(stream => {
          document.getElementById('preview').srcObject = stream;
          askQuestion();
        });
    }

    function askQuestion() {
      const q = questions[currentQuestion];
      document.getElementById('question').textContent = q;
      speak(q);
      startTimer(300); // 5 minutes per question
    }

    function startTimer(seconds) {
      const timer = document.getElementById('timer');
      const interval = setInterval(() => {
        const min = Math.floor(seconds / 60);
        const sec = seconds % 60;
        timer.textContent = `${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
        if (--seconds < 0) {
          clearInterval(interval);
          if (++currentQuestion < questions.length) {
            askQuestion();
          } else {
            endInterview();
          }
        }
      }, 1000);
    }

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'en-US';
      window.speechSynthesis.speak(utterance);
    }

    function endInterview() {
      alert("Interview completed. Video will be saved and uploaded to Drive.");
      // Drive upload logic goes here
    }
  </script>
</body>
</html>

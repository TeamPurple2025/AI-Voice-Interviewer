<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Team Purple AI Interviewer</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #2c003e, #1a0026);
      color: #f5f5f5;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      text-align: center;
    }
    .container {
      background: #00000080;
      border-radius: 2rem;
      padding: 2rem;
      max-width: 600px;
      width: 90%;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
    }
    button {
      padding: 1rem 2rem;
      background-color: #d4af37;
      color: #1a0026;
      border: none;
      border-radius: 1rem;
      font-size: 1.2rem;
      font-weight: bold;
      cursor: pointer;
      margin-top: 1rem;
      box-shadow: 0 0 10px #d4af37;
    }
    button:hover {
      background-color: #ffd700;
    }
    #timer {
      margin-top: 1rem;
      font-size: 1.1rem;
      color: #ffd700;
    }
    #log p {
      text-align: left;
      margin: 0.5rem 0;
    }
    img.logo {
      width: 100px;
      border-radius: 50%;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="logo.png" alt="Company Logo" class="logo">
    <h2>Team Purple AI Interviewer</h2>
    <p><strong>Instructions:</strong> This interview will be conducted by an AI. Each question will be spoken aloud. You have 5 minutes per question to respond. Your video and audio will be recorded. Please stay in front of the camera throughout the session.</p>
    <button onclick="startInterview()">Start Interview</button>
    <div id="timer"></div>
    <div id="log"></div>
  </div>

  <script>
    const questions = [
      "Hello, I am Team Purple AI Interviewer. We are sorry for the inconvenience caused by taking reinterviews as of emergency. Let's start the interview.",
      "1. Tell me about yourself",
      "2. Explain your educational background",
      "3. What are your weakness and strengths",
      "4. Describe your experience with object-oriented programming",
      "5. How would you optimize low performing SQL code",
      "6. Explain the purpose of a firewall",
      "7. How do you approach troubleshooting a crashing program",
      "8. Explain SDLC and its uses",
      "9. Explain the concept of horizontal scaling and its benefits",
      "10. Why should I hire you"
    ];

    let currentQuestion = 0;
    let mediaRecorder;
    let recordedChunks = [];

    async function startInterview() {
      document.querySelector("button").style.display = "none";
      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
      mediaRecorder = new MediaRecorder(stream);

      mediaRecorder.ondataavailable = e => recordedChunks.push(e.data);
      mediaRecorder.onstop = saveRecording;
      mediaRecorder.start();

      askQuestion();
    }

    function askQuestion() {
      if (currentQuestion >= questions.length) {
        mediaRecorder.stop();
        document.getElementById("log").innerHTML += "<p><strong>✅ Interview completed.</strong></p>";
        return;
      }
      const q = questions[currentQuestion];
      document.getElementById("log").innerHTML += `<p><strong>Q:</strong> ${q}</p>`;
      speakText(q);
      startTimer(300, () => {
        currentQuestion++;
        askQuestion();
      });
    }

    function speakText(text) {
      const synth = window.speechSynthesis;
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "en-US";
      synth.speak(utterance);
    }

    function startTimer(seconds, callback) {
      const timerDisplay = document.getElementById("timer");
      let remaining = seconds;
      timerDisplay.textContent = `⏳ ${remaining} seconds left`;
      const interval = setInterval(() => {
        remaining--;
        timerDisplay.textContent = `⏳ ${remaining} seconds left`;
        if (remaining <= 0) {
          clearInterval(interval);
          callback();
        }
      }, 1000);
    }

    function saveRecording() {
      const blob = new Blob(recordedChunks, { type: "video/webm" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "interview_recording.webm";
      a.click();
    }
  </script>
</body>
</html>
